import{r as t,A as _,j as e,L as w}from"./index-CtDtNwU0.js";import{a as R}from"./index-NIGUFBhG.js";function k(){const[m,g]=t.useState([]),[l,b]=t.useState(null),[h,i]=t.useState(!1),[d,p]=t.useState(""),[n,f]=t.useState("");t.useEffect(()=>{u()},[]);const u=async()=>{try{i(!0);const s=await R.get(`${_}/dashboard-sucursales-duplicados`);g(s.data.sucursales),b(s.data.estadisticas_generales),i(!1)}catch(s){console.error("Error al cargar datos:",s),i(!1)}},c=m.filter(s=>{const a=!d||s.nivel_riesgo_sucursal===d,x=!n||s.sucursal.toLowerCase().includes(n.toLowerCase());return a&&x}),j=()=>{const a=[["Sucursal","Total Tel√©fonos Duplicados","Total Clientes Afectados","Total Registros Problema","Promedio Clientes por Tel√©fono","M√°x Clientes en un Tel√©fono","Tel√©fonos Alto Riesgo","Tel√©fonos Medio Riesgo","Tel√©fonos Bajo Riesgo","Nivel Riesgo Sucursal"].join(","),...c.map(r=>[`"${r.sucursal}"`,r.total_telefonos_duplicados,r.total_clientes_afectados,r.total_registros_problema,r.promedio_clientes_por_telefono,r.max_clientes_en_un_telefono,r.telefonos_alto_riesgo,r.telefonos_medio_riesgo,r.telefonos_bajo_riesgo,`"${r.nivel_riesgo_sucursal}"`].join(","))].join(`
`),x=new Blob([a],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),y=URL.createObjectURL(x);o.setAttribute("href",y),o.setAttribute("download",`dashboard_sucursales_duplicados_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},N=s=>{switch(s){case"Alto":return"text-red-400 bg-red-900/30 border-red-500/30";case"Medio":return"text-yellow-400 bg-yellow-900/30 border-yellow-500/30";case"Bajo":return"text-green-400 bg-green-900/30 border-green-500/30";default:return"text-gray-400 bg-gray-900/30 border-gray-500/30"}},v=s=>{switch(s){case"Alto":return"üî¥";case"Medio":return"üü°";case"Bajo":return"üü¢";default:return"‚ö™"}};return e.jsx("div",{className:"p-6 min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800",children:e.jsxs("div",{className:"backdrop-blur-xl bg-white/5 rounded-2xl shadow-2xl p-6 max-w-full mx-2 md:mx-8 border border-white/10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-100 drop-shadow-lg",children:"üè¢ Dashboard Sucursales - Tel√©fonos Duplicados"}),e.jsx("p",{className:"text-gray-300 mt-2 text-lg",children:"An√°lisis de sucursales con mayor incidencia de tel√©fonos duplicados"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(w,{to:"/validador-telefonos",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105 shadow-lg flex items-center gap-2",children:"üì± Ver Tel√©fonos"})})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/10 backdrop-blur-sm border border-blue-500/30 rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"text-blue-400 text-3xl font-bold mb-2",children:l.total_sucursales}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"Total Sucursales"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-500/20 to-red-600/10 backdrop-blur-sm border border-red-500/30 rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"text-red-400 text-3xl font-bold mb-2",children:l.total_telefonos_duplicados}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"Tel√©fonos Duplicados"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 backdrop-blur-sm border border-yellow-500/30 rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"text-yellow-400 text-3xl font-bold mb-2",children:l.total_clientes_afectados}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"Clientes Afectados"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/10 backdrop-blur-sm border border-purple-500/30 rounded-xl p-6 shadow-lg",children:[e.jsx("div",{className:"text-purple-400 text-3xl font-bold mb-2",children:l.promedio_telefonos_por_sucursal}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"Promedio por Sucursal"})]})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-red-500/20 to-red-600/10 backdrop-blur-sm border border-red-500/30 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-red-400 text-2xl font-bold mb-2",children:l.sucursales_alto_riesgo}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"üî¥ Alto Riesgo"})]}),e.jsx("div",{className:"text-4xl",children:"üè¢"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-yellow-500/20 to-yellow-600/10 backdrop-blur-sm border border-yellow-500/30 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-yellow-400 text-2xl font-bold mb-2",children:l.sucursales_medio_riesgo}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"üü° Medio Riesgo"})]}),e.jsx("div",{className:"text-4xl",children:"üè™"})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/10 backdrop-blur-sm border border-green-500/30 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-green-400 text-2xl font-bold mb-2",children:l.sucursales_bajo_riesgo}),e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"üü¢ Bajo Riesgo"})]}),e.jsx("div",{className:"text-4xl",children:"üè¨"})]})})]}),e.jsxs("div",{className:"bg-gray-800/40 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6 mb-8 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nombre de sucursal...",className:"border border-gray-600/50 bg-gray-900/50 text-gray-100 placeholder-gray-400 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",value:n,onChange:s=>f(s.target.value)}),e.jsxs("select",{className:"border border-gray-600/50 bg-gray-900/50 text-gray-100 p-3 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",value:d,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"",children:"Todos los niveles de riesgo"}),e.jsx("option",{value:"Alto",children:"üî¥ Alto Riesgo"}),e.jsx("option",{value:"Medio",children:"üü° Medio Riesgo"}),e.jsx("option",{value:"Bajo",children:"üü¢ Bajo Riesgo"})]}),e.jsx("button",{onClick:u,className:"bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all duration-300 hover:scale-105",children:"üîÑ Actualizar"})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:j,disabled:!m.length,className:"bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 disabled:from-gray-600 disabled:to-gray-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all duration-300 hover:scale-105 disabled:scale-100",children:"üìä Exportar CSV"})})]}),e.jsx("div",{className:"bg-gray-800/40 backdrop-blur-sm border border-gray-700/50 rounded-xl overflow-hidden shadow-xl",children:h?e.jsx("div",{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-400 border-t-transparent"}),e.jsx("div",{className:"text-gray-300 text-xl font-medium",children:"üîç Analizando sucursales..."}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Calculando estad√≠sticas de tel√©fonos duplicados"})]})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-700/60 border-b-2 border-gray-600/50",children:[e.jsx("th",{className:"p-4 text-left font-semibold text-gray-100 min-w-[200px]",children:"üè¢ Sucursal"}),e.jsx("th",{className:"p-4 text-center font-semibold text-gray-100 min-w-[120px]",children:"üì± Tel√©fonos Duplicados"}),e.jsx("th",{className:"p-4 text-center font-semibold text-gray-100 min-w-[120px]",children:"üë• Clientes Afectados"}),e.jsx("th",{className:"p-4 text-center font-semibold text-gray-100 min-w-[120px]",children:"üìä Registros Problema"}),e.jsx("th",{className:"p-4 text-center font-semibold text-gray-100 min-w-[120px]",children:"üìà Promedio"}),e.jsx("th",{className:"p-4 text-center font-semibold text-gray-100 min-w-[120px]",children:"‚ö†Ô∏è Nivel Riesgo"}),e.jsx("th",{className:"p-4 text-center font-semibold text-gray-100 min-w-[200px]",children:"üéØ Distribuci√≥n Riesgo"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700/40",children:c.length>0?c.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-700/20 transition-colors duration-200",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-medium text-gray-100 text-base",children:s.sucursal}),e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["M√°x: ",s.max_clientes_en_un_telefono," clientes en un tel√©fono"]})]}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"bg-red-500/20 text-red-300 px-3 py-2 rounded-lg font-bold text-lg border border-red-500/30",children:s.total_telefonos_duplicados})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"bg-yellow-500/20 text-yellow-300 px-3 py-2 rounded-lg font-semibold border border-yellow-500/30",children:s.total_clientes_afectados})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"bg-purple-500/20 text-purple-300 px-3 py-2 rounded-lg font-semibold border border-purple-500/30",children:s.total_registros_problema})}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:"bg-blue-500/20 text-blue-300 px-3 py-2 rounded-lg font-semibold border border-blue-500/30",children:s.promedio_clientes_por_telefono})}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("span",{className:`px-4 py-2 rounded-lg text-sm font-bold border ${N(s.nivel_riesgo_sucursal)}`,children:[v(s.nivel_riesgo_sucursal)," ",s.nivel_riesgo_sucursal]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-red-500/20 text-red-300 px-2 py-1 rounded text-xs border border-red-500/30",children:["üî¥ ",s.telefonos_alto_riesgo]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-yellow-500/20 text-yellow-300 px-2 py-1 rounded text-xs border border-yellow-500/30",children:["üü° ",s.telefonos_medio_riesgo]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-green-500/20 text-green-300 px-2 py-1 rounded text-xs border border-green-500/30",children:["üü¢ ",s.telefonos_bajo_riesgo]})})]})})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center p-12",children:e.jsx("div",{className:"text-gray-400 text-lg",children:n||d?"‚ùå No hay resultados que coincidan con los filtros aplicados":"‚úÖ No se encontraron datos de sucursales"})})})})]})})}),e.jsx("div",{className:"mt-8 bg-gray-800/40 backdrop-blur-sm border border-gray-700/50 rounded-xl p-6 shadow-lg",children:e.jsxs("div",{className:"text-sm text-gray-300",children:[e.jsxs("p",{className:"mb-4 text-lg font-medium",children:[e.jsx("strong",{className:"text-gray-100",children:"‚ÑπÔ∏è Informaci√≥n del Dashboard:"})," Este dashboard muestra las sucursales con mayor incidencia de tel√©fonos duplicados."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:[e.jsx("span",{className:"text-red-400 font-semibold",children:"üî¥ Alto Riesgo:"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Sucursales con tel√©fonos compartidos por 4+ clientes"})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:[e.jsx("span",{className:"text-yellow-400 font-semibold",children:"üü° Medio Riesgo:"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Sucursales con tel√©fonos compartidos por 3 clientes"})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4",children:[e.jsx("span",{className:"text-green-400 font-semibold",children:"üü¢ Bajo Riesgo:"}),e.jsx("p",{className:"text-gray-300 text-sm mt-1",children:"Sucursales con tel√©fonos compartidos por 2 clientes"})]})]})]})})]})})}export{k as default};
