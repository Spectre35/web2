<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🧪 Test de Routing SPA</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1f2937, #374151);
            color: white;
            padding: 20px;
            min-height: 100vh;
        }
        .container { max-width: 800px; margin: 0 auto; }
        .card { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin: 15px 0; }
        .test-url { background: #1f2937; padding: 10px; border-radius: 5px; margin: 10px 0; word-break: break-all; }
        .result { padding: 10px; border-radius: 5px; margin: 10px 0; }
        .success { background: #065f46; }
        .error { background: #7f1d1d; }
        .btn { background: #3b82f6; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #2563eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 Test de Routing SPA - Render</h1>
        
        <div class="card">
            <h3>📍 URLs a Probar</h3>
            <div class="test-url">https://cargosfraudes.onrender.com/</div>
            <div class="test-url">https://cargosfraudes.onrender.com/aclaraciones</div>
            <div class="test-url">https://cargosfraudes.onrender.com/recuperacion</div>
            <div class="test-url">https://cargosfraudes.onrender.com/caja</div>
        </div>

        <div class="card">
            <h3>🔬 Pruebas Automáticas</h3>
            <button class="btn" onclick="testRoutes()">🚀 Probar Todas las Rutas</button>
            <button class="btn" onclick="testHeaders()">📡 Verificar Headers</button>
            <div id="results"></div>
        </div>

        <div class="card">
            <h3>📋 Información del Entorno</h3>
            <p><strong>URL Actual:</strong> <span id="current-url"></span></p>
            <p><strong>Hostname:</strong> <span id="hostname"></span></p>
            <p><strong>User Agent:</strong> <span id="user-agent"></span></p>
            <p><strong>Timestamp:</strong> <span id="timestamp"></span></p>
        </div>
    </div>

    <script>
        // Llenar información del entorno
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('hostname').textContent = window.location.hostname;
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('timestamp').textContent = new Date().toISOString();

        async function testRoutes() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>🔄 Probando rutas...</p>';
            
            const routes = [
                '/',
                '/aclaraciones',
                '/recuperacion', 
                '/caja',
                '/cargos-auto'
            ];

            let html = '';
            
            for (const route of routes) {
                const url = `https://cargosfraudes.onrender.com${route}`;
                try {
                    const response = await fetch(url, { method: 'HEAD' });
                    const status = response.status;
                    const statusClass = status === 200 ? 'success' : 'error';
                    
                    html += `<div class="result ${statusClass}">
                        <strong>${route}</strong>: ${status} ${response.statusText}
                        <br>Content-Type: ${response.headers.get('content-type') || 'N/A'}
                    </div>`;
                } catch (error) {
                    html += `<div class="result error">
                        <strong>${route}</strong>: ERROR - ${error.message}
                    </div>`;
                }
            }
            
            results.innerHTML = html;
        }

        async function testHeaders() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>🔄 Verificando headers...</p>';
            
            try {
                const response = await fetch('https://cargosfraudes.onrender.com/', { method: 'HEAD' });
                let html = '<div class="result success"><h4>📡 Headers de respuesta:</h4>';
                
                for (const [key, value] of response.headers.entries()) {
                    html += `<p><strong>${key}:</strong> ${value}</p>`;
                }
                
                html += '</div>';
                results.innerHTML = html;
            } catch (error) {
                results.innerHTML = `<div class="result error">Error: ${error.message}</div>`;
            }
        }

        // Auto-ejecutar test al cargar
        window.addEventListener('load', () => {
            setTimeout(testRoutes, 1000);
        });
    </script>
</body>
</html>
